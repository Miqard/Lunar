<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .user-preview {
          display: flex;
          align-items: center;
          /* margin-top: 20px; */
          /* border-bottom: 1.5px solid #323333 ; */
          margin-bottom: 10px;
          padding-bottom: 10px;
          justify-content: space-between;
    }


    .user-img {
      border-radius: 0%;
      margin-right: 20px;
      padding: 0px;
      border: 2px solid white;
      width: 40px; /* Adjust the width to make the image smaller */
      height: 40px; /* Adjust the height accordingly */
      margin-left: 10px;
    }

    .user-img img{
          width: 100%;
          height: 100%;
    }

    .user-details {
          color: #fff;
          display: flex;
          flex-direction: column;
          justify-content: left;
          width: 100%;
    }

    .user-name {
          font-weight: bold;
    }

    .message-description {
          margin-top: 5px;
    }

    .status {
          margin-top: 5px;
    }
    .logo-container {
          position: fixed;
          top: 20px;
          left: 10rem;
          z-index: 1000;
    }
    .logo {
          width: 40px; /* Adjust the width of the logo */
          height: 40px; /* Adjust the height of the logo */
    }

    .container {
      padding:10px;
    }

    .message-div-self {
      display: flex;
      flex-direction: row;
      justify-content: flex-end;
      text-align: right;
      margin-bottom: 5px;
    }

    .message-div-away {
      display: flex;
      justify-content: flex-start;
      flex-direction: row;
      margin-bottom: 5px;
    }

    .message-content {
      border: 2px solid #333333;
      border-radius: 5%;
      display:flex;
      padding: 5px;
      font-size:0.75em;
      width: 45%;

    }

    .reply-container {
      display: flex;
      flex-direction: row;
      justify-content: flex-end;
      margin-top: 20px;
      margin-bottom: 5px;
    }

    .reply-set {
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items:end;
      width: 45%;
      min-height: 10em;
      max-height:10em;
      padding: 10px;
    }

    .message-reply {
        display: flex;
        align-items: start;
        width: 100%;
        height: 100%;
        min-width: 100%;
        max-width: 100%;
        padding: 5px;
        border: 1px solid #333333 ;
        background-color: transparent;
        border-radius: 4px;
        font-size: 0.75em;
        color: white;
      }
      .reply-button {
        padding: 8px;
        background-color: #313232;
        color: #fff;
        border: 10px;
        width: 5em;
        border-radius: 6px;
        cursor: pointer;
        margin-top: 10px;
      }
      .msg-detail-header {
        display:flex;
        flex-direction: row;
      }
      .msg-mate-pic {
        border-radius: 0%;
        margin-right: 10px;
        padding: 0px;
        border: 2px solid white;
        width: 35px; /* Adjust the width to make the image smaller */
        height: 35px; /* Adjust the height accordingly */
        /* align-items: flex-start; */
        /* margin-left: 5px; */
      }

      .mate-info-div {
        display:flex;
        flex-direction: row;
        justify-content: left;
        width:50%;
      }
      .close-span-div {
        display:flex;
        flex-direction: row;
        justify-content: right;
        width:50%;
      }
      .msg-thread-close{
        /* position: absolute;
        top: 10px;
        right:30px; */
        cursor: pointer;
      }
  </style>

  <div id='applogo-container' class="logo-container">
      <a href="/home">
        <object data="/svg/app-logo.svg" type="image/svg+xml"></object>
      </a>
  </div>
</head>
<body>
  <div class="logout-container">
    <a href="/login">
      <object style="pointer-events: none;" data="/svg/logout.svg" type="image/svg+xml"></object>
    </a>
  </div>
  <header class="header">    
    <nav class="header__nav">
        <ul>
            <li>
              <a href="/home">
                <object style="pointer-events: none;" data="/svg/home-icon.svg" type="image/svg+xml"></object>
              </a>           
              <a href="/search">
                <object style="pointer-events: none;" data="/svg/search-icon.svg" type="image/svg+xml"></object>
              </a>

              <a id="msg-icon" href="/message">
                <object style="pointer-events: none;" data="/svg/message-icon.svg" type="image/svg+xml"></object>
              </a>

              <a href="/notification">
                <object style="pointer-events: none;" data="/svg/notif-icon.svg" type="image/svg+xml"></object>
              </a>
              
              <a href="/profile">
                <object style="pointer-events: none;" data="/svg/profile-icon.svg" type="image/svg+xml"></object>
              </a>
            </li>
        </ul>
    </nav>
</header>

<div class="below-header">
  <% for (chatmate in data) { %>
    <% var cluster = data[chatmate]; %>
    <div class="user-preview">   
      <div class="current-user" style="display:none;"><%=current_user%></div>
      <div class="chat-mate" style="display:none;"><%=chatmate%></div>
      <div class="user-details">
        <div class="user-name"><%=chatmate + "(" +  Object.keys(cluster).length + ") "%></div>
        <div class="message-description"><%="   " + cluster[Object.keys(cluster)[0]].message.slice(0, 10) + ". . ." %></div>
      </div>
     </div>
  <% }; %>
  
  <% if (Object.keys(data).length == 0) { ;%>
    <div class="user-details">
      <div class="message-description">You have no message yet.</div>
    </div>  
  <% }; %>
</div>


<script src="/js/messaging.js"></script>
</body>
</html>
